@using Asistant.Areas.Admin.Models
@model PagedViewModel<CustomerOutputViewModel>
@{
    ViewData["Title"]= "مدیریت مشتریان";
}

<h4>مدیریت مشتریان</h4>

@if (TempData["Error"] != null)
{
    <div class="alert alert-danger">
        @TempData["Error"]
    </div>
}
@if (TempData["Succeed"] != null)
{
    <div class="alert alert-success">
        @TempData["Succeed"]
    </div>
}
<a class="btn btn-primary mb-3"
   asp-area="Admin"
   asp-controller="CustomerManagement"
   asp-action="CreateCustomer">
    ایجاد مشتری جدید
</a>


        @if(Model.Items is not null && Model.Items.Any())
{
    <table class="table table-striped table-hover text-center">
        <thead class="table-light">
            <tr>
                <th>شناسه</th>
                <th>نام</th>
                <th>نام خانوادگی</th>
                <th>ایمیل</th>
                <th>شهر</th>
                <th>آدرس</th>
                <th>موجودی</th>
                <th>عملیات</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var c in Model.Items)
        {
            <tr>
                <td>@c.Id</td>
                <td>@c.FirstName</td>
                <td>@c.LastName</td>
                <td>@c.Email</td>
                <td>@c.CityName</td>
                <td>@c.Adress</td>
                <td>@c.Ballance.ToString()</td>
                <td>
                    
                    <a class="btn btn-warning btn-sm"
                       asp-area="Admin"
                           asp-controller="CustomerManagement"
                       asp-action="EditCustomer"
                       asp-route-id="@c.Id"
                       asp-route-userId="@c.UserId">ویرایش</a>
                    <form method="post" class="d-inline"
                          asp-area="Admin"
                              asp-controller="CustomerManagement"
                          asp-action="DeleteCustomer"
                          asp-route-id="@c.Id"
                          asp-route-userId="@c.UserId"
                          onsubmit="return confirm('آیا مطمئن هستید؟');">
                        <button type="submit" class="btn btn-danger btn-sm">حذف</button>
                    </form>
                </td>
            </tr>
        }
    </tbody>
</table>

<nav>
    <ul class="pagination justify-content-center">
        @for (int i = 1; i <= Model.TotalPages; i++)
        {
            <li class="page-item @(i == Model.PageNumber ? "active" : "")">
                <a class="page-link"
                   asp-area="Admin"
                       asp-controller="CustomerManagement"
                   asp-action="ShowCustomers"
                   asp-route-pageNumber="@i"
                   asp-route-pageSize="@Model.PageSize">
                    @i
                </a>
            </li>
        }
        </ul>
    </nav>
}

else
{
    <div class="alert alert-info ">
    لیستی برای نمایش موجود نیست    
    </div>
}

